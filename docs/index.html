<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NYC Traffic Analysis</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" />
    <style>
       * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f4f9;
            color: #333;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 0;
        }
        header {
            background-color: #2c3e50;
            color: white;
            padding: 20px 0;
            width: 100%;
            text-align: center;
            margin-bottom: 40px;
        }
        h1 {
            font-size: 2.8rem;
            font-weight: 700;
            letter-spacing: 1px;
        }
        .container {
            width: 100%;
            max-width: 1000px;
            margin-bottom: 40px;
        }
        .slider-container {
            text-align: center;
            margin-bottom: 25px;
        }
        h2 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }
        .slider {
            width: 66%;
            height: 8px;
            background: #ddd;
            border-radius: 5px;
            outline: none;
            transition: background 0.3s;
            appearance: none;
        }
        .slider:hover {
            background: #bbb;
        }
        .slider-label {
            font-size: 1.2rem;
            margin-top: 10px;
            color: #555;
        }
        .chart-container {
            width: 100%;
            height: 450px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            background: white;
            overflow: hidden;
            margin-bottom: 40px;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        .graphs-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 40px;
            max-width: 1000px;
        }
        .graph-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        .graph-card img {
            width: 100%;
            border-radius: 8px;
        }
        .download-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 900px;
            margin: 40px auto;
        }
        .download-section h2 {
            font-size: 2rem;
            margin-bottom: 15px;
            font-weight: 600;
        }
        .download-btn {
            background: linear-gradient(135deg, #6f42c1, #d66dff);
            color: white;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            text-align: center;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        .download-btn:hover {
            background: linear-gradient(135deg, #d66dff, #6f42c1);
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body>
    <header>
        <h1>NYC Traffic Analysis</h1>
    </header>
    <div class="container">
        <div class="slider-container">
            <h2>Select Hour</h2>
            <input type="range" min="0" max="23" value="11" id="hourSlider" class="slider">
            <p id="hourLabel" class="slider-label">Hour: 11:00 AM</p>
        </div>
        <div class="chart-container">
            <h2>2024 Congestion Areas</h2>
            <iframe id="heatmapIframe" src="heatmaps/traffic_heatmap_11.html"></iframe>
        </div>
    </div>
    <div class="graphs-container">
        <div class="graph-card">
            <h2>Traffic Volume per Year</h2>
            <img src="static/traffic_volume_plot.png" alt="Traffic Volume of the Years">
        </div>
        <div class="graph-card">
            <h2>Traffic Volume per Year</h2>
            <img src="static/traffic_volume_plot.png" alt="Traffic Volume of the Years">
        </div>
        <div class="graph-card">
            <h2>Collisions per Year</h2>
            <img src="static/collisions_plot.png" alt="Collisions">
        </div>
        <div class="graph-card">
            <h2>Past Traffic Volume vs Potential Traffic Volume (2025)</h2>
            <img src="static/actual_vs_potential_plot.png" alt="Actual vs Potential">
        </div>
    </div>

    <!-- Download Section -->
    <div class="download-section">
        <h2>Potential Traffic Volume Data for 2025</h2>
        <p>I developed a machine learning model to find potential traffic volume for 2025,
leveraging historical traffic data trends. This data provides valuable insights into expected traffic
conditions, aiding in better city planning for the coming year. </p>
    
<div class="download-buttons">
        <a href="static/traffic_volume_2025_part1.csv" download="traffic_volume_2025_part1.csv"
class="download-btn">Download Part 1</a>
        <a href="static/traffic_volume_2025_part2.csv" download="traffic_volume_2025_part2.csv"
class="download-btn">Download Part 2</a>
</div>

    <script>
        // Function to update the heatmap iframe based on the selected hour
        function updateHeatmap(hour) {
            const iframe = document.getElementById("heatmapIframe");
            let adjustedHour = hour; // Directly use the hour as the number

            // Build the heatmap file name dynamically
            const heatmapFile = `heatmaps/traffic_heatmap_${adjustedHour}.html`; 

            // Add a timestamp to the URL to prevent caching
            const timestamp = new Date().getTime();  // Generate a unique timestamp
            const heatmapSrc = `${heatmapFile}?t=${timestamp}`; // Append timestamp to URL

            // Update the iframe source to the new heatmap file
            iframe.src = heatmapSrc; 
        }

        // Get slider and label elements
        const hourSlider = document.getElementById("hourSlider");
        const hourLabel = document.getElementById("hourLabel");

        // Event listener for slider change
        hourSlider.addEventListener('input', function() {
            const hour = hourSlider.value;
            let hourText = formatHour(hour); // Format hour to display AM/PM format
            hourLabel.textContent = `Hour: ${hourText}`;

            // Update the heatmap based on the selected hour
            updateHeatmap(hour);
        });

        // Function to format hour to AM/PM
        function formatHour(hour) {
            if (hour == 0) return '12:00 AM';
            if (hour == 12) return '12:00 PM';
            return hour > 12 ? `${hour - 12}:00 PM` : `${hour}:00 AM`;
        }

        // Initial setup: set heatmap based on initial slider value
        const initialHour = hourSlider.value;
        updateHeatmap(initialHour); // Set the initial heatmap for the default slider value (11 AM)
    </script>
</body>
</html>


